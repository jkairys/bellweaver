# Environment Variables Setup

## .env File Auto-Loading

The test suite automatically loads environment variables from a `.env` file in the project root using `python-dotenv`.

**You do NOT need to export variables manually.** Just create the `.env` file and pytest will load it automatically.

### Setup

1. Create `.env` in the project root:
```bash
COMPASS_USERNAME=your_username
COMPASS_PASSWORD=your_password
```

2. Run tests - no export needed:
```bash
poetry run pytest tests/test_compass_client_real.py -v
```

That's it! The variables will be loaded automatically.

### How It Works

The `tests/conftest.py` file automatically:
1. Loads the `.env` file (if it exists) using `python-dotenv`
2. Makes all variables available to tests via `os.environ`
3. Works with both environment variables and command-line arguments

```python
# From tests/conftest.py
from dotenv import load_dotenv
from pathlib import Path

env_file = Path(__file__).parent.parent / ".env"
if env_file.exists():
    load_dotenv(env_file)
```

### Security

The `.env` file is in `.gitignore` and will never be committed. This prevents accidental credential leaks.

### Credentials in .env

Keep sensitive credentials in `.env`:
- `COMPASS_USERNAME` - Your Compass login
- `COMPASS_PASSWORD` - Your Compass password
- `CLAUDE_API_KEY` - Your Anthropic API key (if testing filtering)

### Alternatives (Still Work)

If you prefer, you can still:

1. **Export variables**:
```bash
export COMPASS_USERNAME=your_username
poetry run pytest tests/test_compass_client_real.py -v
```

2. **Use command-line arguments**:
```bash
poetry run pytest tests/test_compass_client_real.py -v \
  --compass-username=your_username \
  --compass-password=your_password
```

Priority order (highest to lowest):
1. Command-line arguments (`--compass-username`)
2. Environment variables (`export COMPASS_USERNAME=...`)
3. .env file
